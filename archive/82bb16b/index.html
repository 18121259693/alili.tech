<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta itemprop="description" content="$(function(){ var html = &#34;\n\x3chr\x3e\x3cp\x3e\x3cstrong\x3e\x26#x83DC;\x26#x9E1F;\x26#x5B66;\x26#x4E60;\x26#x4E4B;\x26#x8DEF;\x3c\/strong\x3e\x3cbr\x3e\/\/L6zt github\x3cbr\x3e\x26#x81EA;\x26#x5DF1; \x26#x5728;\x26#x9020;\x26#x7EC4;\x26#x4EF6;\x26#x8F6E;\x26#x5B50;\x26#xFF0C;\x26#x4E5F;\x26#x5C31;\x26#x662F;\x26#x778E;\x26#x641E;\x26#x3002;\x3cbr\x3e\x26#x81EA;\x26#x5DF1;\x26#x5199;\x26#x4E86;\x26#x4E2A;slider\x26#x7EC4;\x26#x4EF6;\x26#xFF0C;\x26#x60F3;\x26#x52A0;\x26#x4E2A;\x26#x6C14;\x26#x6CE1;\x26#x63D0;\x26#x793A;\x26#x3002;\x26#x4E3A;\x26#x4E86;\x26#x590D;\x26#x7528;\x26#x548C;\x26#x7701;\x26#x4E8B;\x26#x7279;\x26#x6B64;\x26#x5199;\x26#x4E86;\x26#x4E2A;\x26#x6307;\x26#x4EE4;\x26#x6765;\x26#x89E3;\x26#x51B3;\x26#x3002;\x3cbr\x3e\x3ca href=\x22http:\/\/vuecompoents.jcmark.cn\/slider\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x26#x9884;\x26#x89C8;\x26#x5730;\x26#x5740;\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/github.com\/L6zt\/components\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x26#x9879;\x26#x76EE;\x26#x5730;\x26#x5740;\x3c\/a\x3e github \x26#x6211;\x26#x53EB;\x26#x7ED9;\x26#x5B83;\x26#x80E1;\x26#x535A;\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVbijKd?w=774\x26amp;h=208\x22 src=\x22https:\/\/static.alili.tech\/img\/bVbijKd?w=774\x26amp;h=208\x22 alt=\x22\x26#x6548;\x26#x679C;\x26#x56FE;\x26#x7247;\x22 title=\x22\x26#x6548;\x26#x679C;\x26#x56FE;\x26#x7247;\x22 style=\x22cursor:pointer;display:inline\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3chr\x3e\x3cp\x3e\x3cstrong\x3e\x26#x6211;\x26#x5BF9;\x26#x6307;\x26#x4EE4;\x26#x7684;\x26#x7406;\x26#x89E3;:\x3c\/strong\x3e \x26#x524D;\x26#x4E0D;\x26#x4E45;\x26#x770B;\x26#x8FC7; \x26#x4E00;\x26#x90E8;\x26#x5206;vnode\x26#x5B9E;\x26#x73B0;\x26#x6E90;\x26#x7801;\x26#xFF0C;\x26#x5948;\x26#x4F55;\x26#x8D44;\x26#x8D28;\x26#x6709;\x26#x9650;...\x26#x770B;\x26#x4E0D;\x26#x61C2;\x26#x3002;\x3cbr\x3evnode\x26#x7684;\x26#x751F;\x26#x547D;\x26#x5468;\x26#x671F;-----\x26gt; \x26#x751F;\x26#x6210;\x26#x524D;\x26#x3001;\x26#x751F;\x26#x6210;\x26#x540E;\x26#x3001;\x26#x751F;\x26#x6210;\x26#x771F;\x26#x6B63;dom\x26#x3001;\x26#x66F4;\x26#x65B0; vnode\x26#x3001;\x26#x66F4;\x26#x65B0;dom \x26#x3001; \x26#x9500;\x26#x6BC1;\x26#x3002;\x3cbr\x3e\x26#x800C;Vue\x26#x7684;\x26#x6307;\x26#x4EE4;\x26#x5219;\x26#x662F;\x26#x4F9D;\x26#x8D56;\x26#x4E8E;vnode \x26#x7684;\x26#x751F;\x26#x547D;\x26#x5468;\x26#x671F;\x26#xFF0C; \x26#x65E0;\x26#x975E;\x26#x4E5F;\x26#x662F;\x26#x6709;\x26#x4EE5;\x26#x4E0A;\x26#x7C7B;\x26#x4F3C;\x26#x7684;\x26#x94A9;\x26#x5B50;\x26#x3002;\x3cbr\x3e\x3cstrong\x3e\x26#x4EE3;\x26#x7801;\x26#x6548;\x26#x679C;\x3c\/strong\x3e\x3cbr\x3e\x26#x6307;\x26#x4EE4;\x26#x6302;A\x26#x5143;\x26#x7D20;\x26#x4E0A;\x26#xFF0C;\x26#x9ED8;\x26#x8BA4;\x26#x751F;\x26#x6210;\x26#x4E00;\x26#x4E2A;\x26#x6C14;\x26#x6CE1;\x26#x5BB9;\x26#x5668;B\x26#x63D2;\x26#x5165;\x26#x5230; body \x26#x91CC;\x26#x9762;\x26#xFF0C;B \x26#x4F1A;\x26#x83B7;\x26#x53D6; \x26#x5143;\x26#x7D20; A \x26#x7684;\x26#x4F4D;\x26#x7F6E;\x26#x4FE1;\x26#x606F; \x26#x548C; \x26#x81EA;\x26#x5DF1;\x26#x7684;\x3cbr\x3e\x26#x5927;\x26#x5C0F;\x26#x4FE1;\x26#x606F;\x26#xFF0C;\x26#x7ECF;\x26#x8FC7; \x26#x4E00;\x26#x4E9B;\x26#x5217;\x26#x7684;\x26#x8FD0;\x26#x7B97;\x26#xFF0C;B \x26#x5143;\x26#x7D20;\x26#x4F1A;\x26#x5B9A;\x26#x4F4D;\x26#x5230; A \x26#x7684; \x26#x4E2D;\x26#x95F4; \x26#x4E0A; \x26#x4F4D;\x26#x7F6E;\x26#x3002; \x26#x5F53;\x26#x9F20;\x26#x6807;\x26#x653E;\x26#x5230; A \x26#x4E0A; B \x26#x5C31;\x26#x4F1A;\x26#x663E;\x26#x793A;\x26#x51FA;\x26#x6765;\x26#xFF0C;\x26#x79BB;\x26#x5F00;\x26#x5C31;\x26#x4F1A;\x26#x6D88;\x26#x5931;\x26#x3002;\x3c\/p\x3e\x3ch2 id=\x22articleHeader0\x22\x3e\x26#x4EE5;\x26#x4E0B;\x26#x4EE3;\x26#x7801;\x3c\/h2\x3e\x3cp\x3e\x3cstrong\x3e\x26#x6C14;\x26#x6CE1;\x26#x6307;\x26#x4EE4;\x3c\/strong\x3e\x3c\/p\x3e\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none\x22\x3e\x3cdiv class=\x22widget-codetool--inner\x22\x3e\x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22\x26#x5168;\x26#x9009;\x22\x3e\x3c\/span\x3e \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { on , off , once, contains, elemOffset, position, addClass, removeClass } from \x26apos;."><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="vue 指令---气泡提示(手撸实战)"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content=""><meta property="og:site_name" content="Alili"><meta name="generator" content="Hugo 0.51"><title>vue 指令---气泡提示(手撸实战) | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/meslo-LG/styles.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad()</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error",function(e){var t=e.target;"img"==t.tagName.toLowerCase()&&(t.style.display="none")},!0)</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/82bb16b/",
				"appid": "1613049289050283", 
				"title": "vue 指令---气泡提示(手撸实战) | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-11-16T13:35:00"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")' style="display:none"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id="i-prev" class="info" style="display:none">Previous post</span> <span id="i-next" class="info" style="display:none">Next post</span> <span id="i-top" class="info" style="display:none">Back to top</span> <span id="i-share" class="info" style="display:none">Share post</span></span><br><div id="share" style="display:none"></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">vue 指令---气泡提示(手撸实战)</h1><div class="meta"><div class="postdate"><time datetime="2018-11-03" itemprop="datePublished">2018-11-03</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div>| 3153字<div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="row"><script>$(function(){var s='\n<hr><p><strong>&#x83DC;&#x9E1F;&#x5B66;&#x4E60;&#x4E4B;&#x8DEF;</strong><br>//L6zt github<br>&#x81EA;&#x5DF1; &#x5728;&#x9020;&#x7EC4;&#x4EF6;&#x8F6E;&#x5B50;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x778E;&#x641E;&#x3002;<br>&#x81EA;&#x5DF1;&#x5199;&#x4E86;&#x4E2A;slider&#x7EC4;&#x4EF6;&#xFF0C;&#x60F3;&#x52A0;&#x4E2A;&#x6C14;&#x6CE1;&#x63D0;&#x793A;&#x3002;&#x4E3A;&#x4E86;&#x590D;&#x7528;&#x548C;&#x7701;&#x4E8B;&#x7279;&#x6B64;&#x5199;&#x4E86;&#x4E2A;&#x6307;&#x4EE4;&#x6765;&#x89E3;&#x51B3;&#x3002;<br><a href="http://vuecompoents.jcmark.cn/slider" rel="nofollow noreferrer" target="_blank">&#x9884;&#x89C8;&#x5730;&#x5740;</a><br><a href="https://github.com/L6zt/components" rel="nofollow noreferrer" target="_blank">&#x9879;&#x76EE;&#x5730;&#x5740;</a> github &#x6211;&#x53EB;&#x7ED9;&#x5B83;&#x80E1;&#x535A;<br><span class="img-wrap"><img data-src="/img/bVbijKd?w=774&amp;h=208" src="https://static.alili.tech/img/bVbijKd?w=774&amp;h=208" alt="&#x6548;&#x679C;&#x56FE;&#x7247;" title="&#x6548;&#x679C;&#x56FE;&#x7247;" style="cursor:pointer;display:inline"></span></p><hr><p><strong>&#x6211;&#x5BF9;&#x6307;&#x4EE4;&#x7684;&#x7406;&#x89E3;:</strong> &#x524D;&#x4E0D;&#x4E45;&#x770B;&#x8FC7; &#x4E00;&#x90E8;&#x5206;vnode&#x5B9E;&#x73B0;&#x6E90;&#x7801;&#xFF0C;&#x5948;&#x4F55;&#x8D44;&#x8D28;&#x6709;&#x9650;...&#x770B;&#x4E0D;&#x61C2;&#x3002;<br>vnode&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;-----&gt; &#x751F;&#x6210;&#x524D;&#x3001;&#x751F;&#x6210;&#x540E;&#x3001;&#x751F;&#x6210;&#x771F;&#x6B63;dom&#x3001;&#x66F4;&#x65B0; vnode&#x3001;&#x66F4;&#x65B0;dom &#x3001; &#x9500;&#x6BC1;&#x3002;<br>&#x800C;Vue&#x7684;&#x6307;&#x4EE4;&#x5219;&#x662F;&#x4F9D;&#x8D56;&#x4E8E;vnode &#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF0C; &#x65E0;&#x975E;&#x4E5F;&#x662F;&#x6709;&#x4EE5;&#x4E0A;&#x7C7B;&#x4F3C;&#x7684;&#x94A9;&#x5B50;&#x3002;<br><strong>&#x4EE3;&#x7801;&#x6548;&#x679C;</strong><br>&#x6307;&#x4EE4;&#x6302;A&#x5143;&#x7D20;&#x4E0A;&#xFF0C;&#x9ED8;&#x8BA4;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x6C14;&#x6CE1;&#x5BB9;&#x5668;B&#x63D2;&#x5165;&#x5230; body &#x91CC;&#x9762;&#xFF0C;B &#x4F1A;&#x83B7;&#x53D6; &#x5143;&#x7D20; A &#x7684;&#x4F4D;&#x7F6E;&#x4FE1;&#x606F; &#x548C; &#x81EA;&#x5DF1;&#x7684;<br>&#x5927;&#x5C0F;&#x4FE1;&#x606F;&#xFF0C;&#x7ECF;&#x8FC7; &#x4E00;&#x4E9B;&#x5217;&#x7684;&#x8FD0;&#x7B97;&#xFF0C;B &#x5143;&#x7D20;&#x4F1A;&#x5B9A;&#x4F4D;&#x5230; A &#x7684; &#x4E2D;&#x95F4; &#x4E0A; &#x4F4D;&#x7F6E;&#x3002; &#x5F53;&#x9F20;&#x6807;&#x653E;&#x5230; A &#x4E0A; B &#x5C31;&#x4F1A;&#x663E;&#x793A;&#x51FA;&#x6765;&#xFF0C;&#x79BB;&#x5F00;&#x5C31;&#x4F1A;&#x6D88;&#x5931;&#x3002;</p><h2 id="articleHeader0">&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;</h2><p><strong>&#x6C14;&#x6CE1;&#x6307;&#x4EE4;</strong></p><div class="widget-codetool" style="display:none"><div class="widget-codetool--inner"><span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span> <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="import { on , off , once, contains, elemOffset, position, addClass, removeClass } from &apos;../utils/dom&apos;;\nimport Vue from &apos;vue&apos;\nconst global = window;\nconst doc = global.document;\nconst top = 15;\nexport default {\n  name : &apos;jc-tips&apos; ,\n  bind (el , binding , vnode) {\n    // &#x786E;&#x5B9A;el &#x5DF2;&#x7ECF;&#x5728;&#x9875;&#x9762;&#x91CC; &#x4E3A;&#x4E86;&#x83B7;&#x53D6;el &#x4F4D;&#x7F6E;&#x4FE1;&#x4FE1; \n    Vue.nextTick(() =&gt; {\n      const { context } = vnode;\n      const { expression } = binding;\n      // &#x6C14;&#x6CE1;&#x5143;&#x7D20;&#x6839;&#x7ED3;&#x70B9;\n      const fWarpElm = doc.createElement(&apos;div&apos;);\n      // handleFn &#x6C14;&#x6CE1;&#x91CC;&#x7684;&#x5B50;&#x5143;&#x7D20;&#xFF08;&#x81EA;&#x5B9A;&#x4E49;&#xFF09;\n      const handleFn = binding.expression &amp;&amp; context[expression] || (() =&gt; &apos;&apos;);\n      const createElm = handleFn();\n      fWarpElm.className = &apos;hide jc-tips-warp&apos;;\n      fWarpElm.appendChild(createElm);\n      doc.body.appendChild(fWarpElm);\n      // &#x7ED9;el &#x7ED1;&#x5B9A;&#x5143;&#x7D20;&#x5F85;&#x5176;&#x4ED6;&#x64CD;&#x4F5C;&#x7528;\n      el._tipElm = fWarpElm;\n      el._createElm = createElm;\n      // &#x9F20;&#x6807;&#x653E;&#x4E0A;&#x53BB;&#x7684; &#x56DE;&#x8C03;&#x51FD;&#x6570;\n      el._tip_hover_fn = function(e) {\n        // &#x5220;&#x9664;&#x8282;&#x70B9;&#x51FD;&#x6570;\n          removeClass(fWarpElm, &apos;hide&apos;);\n          fWarpElm.style.opacity = 0;\n          // &#x4E0D;&#x52A0;&#x5EF6;&#x8FDF; fWarpElm&#x7684;&#x5927;&#x5C0F;&#x4FE1;&#x606F; &#xFF08;&#x5143;&#x7D20;&#x5927;&#x5C0F;&#x662F; 0 0&#xFF09;---&gt; &#x5220;&#x9664; class &#x4E0D;&#x662F;&#x7ACB;&#x5373;&#x6E32;&#x67D3;\n          setTimeout(() =&gt; {\n            const offset = elemOffset(fWarpElm);\n            const location = position(el);\n            fWarpElm.style.cssText =  `left: ${location.left  - offset.width / 2}px; top: ${location.top - top - offset.height}px;`;\n            fWarpElm.style.opacity = 1;\n          }, 16);\n      };\n      //&#x9F20;&#x6807;&#x79BB;&#x5F00; &#x5143;&#x7D20; &#x9690;&#x85CF; &#x6C14;&#x6CE1;\n      const handleLeave = function (e) {\n        fWarpElm.style.opacity = 0;\n        // transitionEnd &#x4E0D;&#x592A;&#x597D;&#x5E94;&#x8BE5;&#x52A0;&#x5165;&#x517C;&#x5BB9;\n        once({\n          el,\n          type: &apos;transitionEnd&apos;,\n          fn: function() {\n            console.log(&apos;hide&apos;);\n            addClass(fWarpElm, &apos;hide&apos;);\n          }\n        })\n      };\n      el._tip_leave_fn =  handleLeave;\n      // &#x89E3;&#x51B3; slider &#x79FB;&#x52A8;&#x7ED3;&#x675F; &#x63D0;&#x793A;&#x4E0D;&#x6D88;&#x5931;\n      el._tip_mouse_up_fn = function (e) {\n        const target = e.target;\n        console.log(target);\n        if (!contains(fWarpElm, target) &amp;&amp; el !== target) {\n          handleLeave(e)\n        }\n      };\n      on({\n        el,\n        type: &apos;mouseenter&apos;,\n        fn: el._tip_hover_fn\n      });\n      on({\n        el,\n        type: &apos;mouseleave&apos;,\n        fn: el._tip_leave_fn\n      });\n      on({\n        el: doc.body,\n        type: &apos;mouseup&apos;,\n        fn: el._tip_mouse_up_fn\n      })\n    });\n  } ,\n  // &#x6C14;&#x6CE1;&#x7684;&#x6570;&#x636E;&#x53D8;&#x5316; &#x4F9D;&#x8D56;&#x4E8E; context[expression] &#x8FD4;&#x56DE;&#x7684;&#x503C;\n  componentUpdated(el , binding , vnode) {\n    const { context } = vnode;\n    const { expression } = binding;\n    const handleFn = expression &amp;&amp; context[expression] || (() =&gt; &apos;&apos;);\n    Vue.nextTick( () =&gt; {\n      const createNode = handleFn();\n      const fWarpElm = el._tipElm;\n      if (fWarpElm) {\n        fWarpElm.replaceChild(createNode, el._createElm);\n        el._createElm = createNode;\n        const offset = elemOffset(fWarpElm);\n        const location = position(el);\n        fWarpElm.style.cssText =  `left: ${location.left  - offset.width / 2}px; top: ${location.top - top - offset.height}px;`;\n      }\n    })\n  },\n // &#x5220;&#x9664; &#x4E8B;&#x4EF6;\n  unbind (el , bind , vnode) {\n    off({\n      el: dov.body,\n      type: &apos;mouseup&apos;,\n      fn: el._tip_mouse_up_fn\n    });\n    el = null;\n  }\n}\n" title="" data-original-title="&#x590D;&#x5236;"></span> <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span></div></div><pre class="hljs typescript"><code><span class="hljs-keyword">import</span> { on , off , once, contains, elemOffset, position, addClass, removeClass } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;../utils/dom&apos;</span>;\n<span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;vue&apos;</span>\n<span class="hljs-keyword">const</span> global = <span class="hljs-built_in">window</span>;\n<span class="hljs-keyword">const</span> doc = global.document;\n<span class="hljs-keyword">const</span> top = <span class="hljs-number">15</span>;\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n  name : <span class="hljs-string">&apos;jc-tips&apos;</span> ,\n  bind (el , binding , vnode) {\n    <span class="hljs-comment">// &#x786E;&#x5B9A;el &#x5DF2;&#x7ECF;&#x5728;&#x9875;&#x9762;&#x91CC; &#x4E3A;&#x4E86;&#x83B7;&#x53D6;el &#x4F4D;&#x7F6E;&#x4FE1;&#x4FE1; </span>\n    Vue.nextTick(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {\n      <span class="hljs-keyword">const</span> { context } = vnode;\n      <span class="hljs-keyword">const</span> { expression } = binding;\n      <span class="hljs-comment">// &#x6C14;&#x6CE1;&#x5143;&#x7D20;&#x6839;&#x7ED3;&#x70B9;</span>\n      <span class="hljs-keyword">const</span> fWarpElm = doc.createElement(<span class="hljs-string">&apos;div&apos;</span>);\n      <span class="hljs-comment">// handleFn &#x6C14;&#x6CE1;&#x91CC;&#x7684;&#x5B50;&#x5143;&#x7D20;&#xFF08;&#x81EA;&#x5B9A;&#x4E49;&#xFF09;</span>\n      <span class="hljs-keyword">const</span> handleFn = binding.expression &amp;&amp; context[expression] || <span class="hljs-function">(<span class="hljs-params">(<span class="hljs-params"></span>) =&gt; &apos;&apos;</span>);\n      <span class="hljs-params">const</span> <span class="hljs-params">createElm</span> = <span class="hljs-params">handleFn</span><span class="hljs-params">()</span>;\n      <span class="hljs-params">fWarpElm</span>.<span class="hljs-params">className</span> = &apos;<span class="hljs-params">hide</span> <span class="hljs-params">jc</span>-<span class="hljs-params">tips</span>-<span class="hljs-params">warp</span>&apos;;\n      <span class="hljs-params">fWarpElm</span>.<span class="hljs-params">appendChild</span>(<span class="hljs-params">createElm</span>);\n      <span class="hljs-params">doc</span>.<span class="hljs-params">body</span>.<span class="hljs-params">appendChild</span>(<span class="hljs-params">fWarpElm</span>);\n      // &#x7ED9;<span class="hljs-params">el</span> &#x7ED1;&#x5B9A;&#x5143;&#x7D20;&#x5F85;&#x5176;&#x4ED6;&#x64CD;&#x4F5C;&#x7528;\n      <span class="hljs-params">el</span>._<span class="hljs-params">tipElm</span> = <span class="hljs-params">fWarpElm</span>;\n      <span class="hljs-params">el</span>._<span class="hljs-params">createElm</span> = <span class="hljs-params">createElm</span>;\n      // &#x9F20;&#x6807;&#x653E;&#x4E0A;&#x53BB;&#x7684; &#x56DE;&#x8C03;&#x51FD;&#x6570;\n      <span class="hljs-params">el</span>._<span class="hljs-params">tip_hover_fn</span> = <span class="hljs-params">function</span>(<span class="hljs-params">e</span>) {\n        // &#x5220;&#x9664;&#x8282;&#x70B9;&#x51FD;&#x6570;\n          <span class="hljs-params">removeClass</span>(<span class="hljs-params">fWarpElm, &apos;hide&apos;</span>);\n          <span class="hljs-params">fWarpElm</span>.<span class="hljs-params">style</span>.<span class="hljs-params">opacity</span> = 0;\n          // &#x4E0D;&#x52A0;&#x5EF6;&#x8FDF; <span class="hljs-params">fWarpElm</span>&#x7684;&#x5927;&#x5C0F;&#x4FE1;&#x606F; &#xFF08;&#x5143;&#x7D20;&#x5927;&#x5C0F;&#x662F; 0 0&#xFF09;---&gt; &#x5220;&#x9664; <span class="hljs-params">class</span> &#x4E0D;&#x662F;&#x7ACB;&#x5373;&#x6E32;&#x67D3;\n          <span class="hljs-params">setTimeout</span>(<span class="hljs-params">(<span class="hljs-params"></span>) =&gt; {\n            <span class="hljs-keyword">const</span> offset = elemOffset(<span class="hljs-params">fWarpElm</span>);\n            <span class="hljs-keyword">const</span> location = position(<span class="hljs-params">el</span>);\n            fWarpElm.style.cssText =  `left: ${location.left  - offset.width / 2}px; top: ${location.top - top - offset.height}px;`;\n            fWarpElm.style.opacity = 1;\n          }, 16</span>);\n      };\n      //&#x9F20;&#x6807;&#x79BB;&#x5F00; &#x5143;&#x7D20; &#x9690;&#x85CF; &#x6C14;&#x6CE1;\n      <span class="hljs-params">const</span> <span class="hljs-params">handleLeave</span> = <span class="hljs-params">function</span> (<span class="hljs-params">e</span>) {\n        <span class="hljs-params">fWarpElm</span>.<span class="hljs-params">style</span>.<span class="hljs-params">opacity</span> = 0;\n        // <span class="hljs-params">transitionEnd</span> &#x4E0D;&#x592A;&#x597D;&#x5E94;&#x8BE5;&#x52A0;&#x5165;&#x517C;&#x5BB9;\n        <span class="hljs-params">once</span>(<span class="hljs-params">{\n          el,\n          <span class="hljs-keyword">type</span>: &apos;transitionEnd&apos;,\n          fn: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {\n            <span class="hljs-built_in">console</span>.log(<span class="hljs-params">&apos;hide&apos;</span>);\n            addClass(<span class="hljs-params">fWarpElm, &apos;hide&apos;</span>);\n          }\n        }</span>)\n      };\n      <span class="hljs-params">el</span>._<span class="hljs-params">tip_leave_fn</span> =  <span class="hljs-params">handleLeave</span>;\n      // &#x89E3;&#x51B3; <span class="hljs-params">slider</span> &#x79FB;&#x52A8;&#x7ED3;&#x675F; &#x63D0;&#x793A;&#x4E0D;&#x6D88;&#x5931;\n      <span class="hljs-params">el</span>._<span class="hljs-params">tip_mouse_up_fn</span> = <span class="hljs-params">function</span> (<span class="hljs-params">e</span>) {\n        <span class="hljs-params">const</span> <span class="hljs-params">target</span> = <span class="hljs-params">e</span>.<span class="hljs-params">target</span>;\n        <span class="hljs-params">console</span>.<span class="hljs-params">log</span>(<span class="hljs-params">target</span>);\n        <span class="hljs-params">if</span> (<span class="hljs-params">!contains(<span class="hljs-params">fWarpElm, target</span>) &amp;&amp; el !== target</span>) {\n          <span class="hljs-params">handleLeave</span>(<span class="hljs-params">e</span>)\n        }\n      };\n      <span class="hljs-params">on</span>(<span class="hljs-params">{\n        el,\n        <span class="hljs-keyword">type</span>: &apos;mouseenter&apos;,\n        fn: el._tip_hover_fn\n      }</span>);\n      <span class="hljs-params">on</span>(<span class="hljs-params">{\n        el,\n        <span class="hljs-keyword">type</span>: &apos;mouseleave&apos;,\n        fn: el._tip_leave_fn\n      }</span>);\n      <span class="hljs-params">on</span>(<span class="hljs-params">{\n        el: doc.body,\n        <span class="hljs-keyword">type</span>: &apos;mouseup&apos;,\n        fn: el._tip_mouse_up_fn\n      }</span>)\n    });\n  } ,\n  // &#x6C14;&#x6CE1;&#x7684;&#x6570;&#x636E;&#x53D8;&#x5316; &#x4F9D;&#x8D56;&#x4E8E; <span class="hljs-params">context</span>[<span class="hljs-params">expression</span>] &#x8FD4;&#x56DE;&#x7684;&#x503C;\n  <span class="hljs-params">componentUpdated</span>(<span class="hljs-params">el , binding , vnode</span>) {\n    <span class="hljs-params">const</span> { <span class="hljs-params">context</span> } = <span class="hljs-params">vnode</span>;\n    <span class="hljs-params">const</span> { <span class="hljs-params">expression</span> } = <span class="hljs-params">binding</span>;\n    <span class="hljs-params">const</span> <span class="hljs-params">handleFn</span> = <span class="hljs-params">expression</span> &amp;&amp; <span class="hljs-params">context</span>[<span class="hljs-params">expression</span>] || (<span class="hljs-params">(<span class="hljs-params"></span>) =&gt; &apos;&apos;</span>);\n    <span class="hljs-params">Vue</span>.<span class="hljs-params">nextTick</span>(<span class="hljs-params"> (<span class="hljs-params"></span>) =&gt; {\n      <span class="hljs-keyword">const</span> createNode = handleFn(<span class="hljs-params"></span>);\n      <span class="hljs-keyword">const</span> fWarpElm = el._tipElm;\n      <span class="hljs-keyword">if</span> (<span class="hljs-params">fWarpElm</span>) {\n        fWarpElm.replaceChild(<span class="hljs-params">createNode, el._createElm</span>);\n        el._createElm = createNode;\n        <span class="hljs-keyword">const</span> offset = elemOffset(<span class="hljs-params">fWarpElm</span>);\n        <span class="hljs-keyword">const</span> location = position(<span class="hljs-params">el</span>);\n        fWarpElm.style.cssText =  `left: ${location.left  - offset.width / 2}px; top: ${location.top - top - offset.height}px;`;\n      }\n    }</span>)\n  },\n // &#x5220;&#x9664; &#x4E8B;&#x4EF6;\n  <span class="hljs-params">unbind</span> (<span class="hljs-params">el , bind , vnode</span>) {\n    <span class="hljs-params">off</span>(<span class="hljs-params">{\n      el: dov.body,\n      <span class="hljs-keyword">type</span>: &apos;mouseup&apos;,\n      fn: el._tip_mouse_up_fn\n    }</span>);\n    <span class="hljs-params">el</span> = <span class="hljs-params">null</span>;\n  }\n}\n</span></code></pre><p><strong>slider &#x7EC4;&#x4EF6;</strong></p><div class="widget-codetool" style="display:none"><div class="widget-codetool--inner"><span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span> <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="&lt;template&gt;\n    &lt;div class=&quot;jc-slider-cmp&quot;&gt;\n        &lt;section\n                class=&quot;slider-active-bg&quot;\n                :style=&quot;{width: `${left}px`}&quot;\n            &gt;\n        &lt;/section&gt;\n            &lt;i\n                    class=&quot;jc-slider-dot&quot;\n                    :style=&quot;{left: `${left}px`}&quot;\n                    ref=&quot;dot&quot;\n                    @mousedown=&quot;moveStart&quot;\n                    v-jc-tips=&quot;createNode&quot;\n            &gt;\n            &lt;/i&gt;\n    &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\n  import {elemOffset, on, off, once} from &quot;../../utils/dom&quot;;\n  const global = window;\n  const doc = global.document;\n  export default {\n    props: {\n      step: {\n        type: [Number],\n        default: 0\n      },\n      rangeEnd: {\n        type: [Number],\n        required: true\n      },\n      value: {\n        type: [Number],\n        required: true\n      },\n      minValue: {\n        type: [Number],\n        required: true\n      },\n      maxValue: {\n        type: [Number],\n        required: true\n      }\n    },\n    data () {\n      return {\n        startX: null,\n        width: null,\n        curValue: 0,\n        curStep: 0,\n        left: 0,\n        tempLeft: 0\n      }\n    },\n    computed: {\n      wTov () {\n        let step = this.step;\n        let width = this.width;\n        let rangeEnd = this.rangeEnd;\n        if (width) {\n          if (step) {\n            return width / (rangeEnd / step)\n          }\n          return width / rangeEnd\n        }\n        return null\n      },\n      postValue () {\n        let value = null;\n        if (this.step) {\n          value =  this.step * this.curStep;\n        } else {\n          value = this.left / this.wTov;\n        }\n        return value;\n      }\n    },\n    watch: {\n       value: {\n         handler (value) {\n           this.$nextTick(() =&gt; {\n             let step = this.step;\n             let wTov = this.wTov;\n             if (step) {\n               this.left = value / step * wTov;\n             } else {\n                this.left = value * wTov;\n             }\n           })\n         },\n         immediate: true\n       }\n    },\n    methods: {\n      moveStart (e) {\n        e.preventDefault();\n        const body = window.document.body;\n        const _this = this;\n        this.startX = e.pageX;\n        this.tempLeft = this.left;\n        on({\n          el: body,\n          type: &apos;mousemove&apos;,\n          fn: this.moving\n        });\n        once({\n          el: body,\n          type: &apos;mouseup&apos;,\n          fn: function() {\n            console.log(&apos;end&apos;);\n            _this.$emit(&apos;input&apos;, _this.postValue);\n            off({\n              el: body,\n              type: &apos;mousemove&apos;,\n              fn: _this.moving\n            })\n          }\n        })\n      },\n      moving(e) {\n        let curX = e.pageX;\n        let step = this.step;\n        let rangeEnd = this.rangeEnd;\n        let width = this.width;\n        let tempLeft = this.tempLeft;\n        let startX = this.startX;\n        let wTov = this.wTov;\n        if (step !== 0) {\n          let all = parseInt(rangeEnd / step);\n          let curStep = (tempLeft + curX - startX) / wTov;\n          curStep &gt; all &amp;&amp; (curStep = all);\n          curStep &lt; 0 &amp;&amp; (curStep = 0);\n          curStep = Math.round(curStep);\n          this.curStep = curStep;\n          this.left = curStep * wTov;\n        } else {\n          let left = tempLeft + curX - startX;\n          left &lt; 0 &amp;&amp; (left = 0);\n          left &gt; width &amp;&amp; (left = width);\n          this.left = left;\n        }\n      },\n      createNode () {\n        const fElem = document.createElement(&apos;i&apos;);\n        const textNode = document.createTextNode(this.postValue.toFixed(2));\n        fElem.appendChild(textNode);\n       return fElem;\n      }\n    },\n    mounted () {\n      this.width = elemOffset(this.$el).width;\n    }\n  };\n&lt;/script&gt;\n\n&lt;style lang=&quot;scss&quot;&gt;\n    .jc-slider-cmp {\n        position: relative;\n        display: inline-block;\n        width: 100%;\n        border-radius: 4px;\n        height: 8px;\n        background: #ccc;\n        .jc-slider-dot {\n            position: absolute;\n            display: inline-block;\n            width: 15px;\n            height: 15px;\n            border-radius: 50%;\n            left: 0;\n            top: 50%;\n            transform: translate(-50%, -50%);\n            background: #333;\n            cursor: pointer;\n        }\n        .slider-active-bg {\n            position: relative;\n            height: 100%;\n            border-radius: 4px;\n            background: red;\n        }\n    }\n&lt;/style&gt;\n" title="" data-original-title="&#x590D;&#x5236;"></span> <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span></div></div><pre class="hljs xml"><code><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;jc-slider-cmp&quot;</span>&gt;</span>\n        <span class="hljs-tag">&lt;<span class="hljs-name">section</span>\n                <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;slider-active-bg&quot;</span>\n                <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;{width: `${left}px`}&quot;</span>\n            &gt;</span>\n        <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>\n            <span class="hljs-tag">&lt;<span class="hljs-name">i</span>\n                    <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;jc-slider-dot&quot;</span>\n                    <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;{left: `${left}px`}&quot;</span>\n                    <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;dot&quot;</span>\n                    @<span class="hljs-attr">mousedown</span>=<span class="hljs-string">&quot;moveStart&quot;</span>\n                    <span class="hljs-attr">v-jc-tips</span>=<span class="hljs-string">&quot;createNode&quot;</span>\n            &gt;</span>\n            <span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>\n    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>\n\n<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">\n  <span class="hljs-keyword">import</span> {elemOffset, on, off, once} <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../../utils/dom&quot;</span>;\n  <span class="hljs-keyword">const</span> global = <span class="hljs-built_in">window</span>;\n  <span class="hljs-keyword">const</span> doc = global.document;\n  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {\n    <span class="hljs-attr">props</span>: {\n      <span class="hljs-attr">step</span>: {\n        <span class="hljs-attr">type</span>: [<span class="hljs-built_in">Number</span>],\n        <span class="hljs-attr">default</span>: <span class="hljs-number">0</span>\n      },\n      <span class="hljs-attr">rangeEnd</span>: {\n        <span class="hljs-attr">type</span>: [<span class="hljs-built_in">Number</span>],\n        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>\n      },\n      <span class="hljs-attr">value</span>: {\n        <span class="hljs-attr">type</span>: [<span class="hljs-built_in">Number</span>],\n        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>\n      },\n      <span class="hljs-attr">minValue</span>: {\n        <span class="hljs-attr">type</span>: [<span class="hljs-built_in">Number</span>],\n        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>\n      },\n      <span class="hljs-attr">maxValue</span>: {\n        <span class="hljs-attr">type</span>: [<span class="hljs-built_in">Number</span>],\n        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>\n      }\n    },\n    data () {\n      <span class="hljs-keyword">return</span> {\n        <span class="hljs-attr">startX</span>: <span class="hljs-literal">null</span>,\n        <span class="hljs-attr">width</span>: <span class="hljs-literal">null</span>,\n        <span class="hljs-attr">curValue</span>: <span class="hljs-number">0</span>,\n        <span class="hljs-attr">curStep</span>: <span class="hljs-number">0</span>,\n        <span class="hljs-attr">left</span>: <span class="hljs-number">0</span>,\n        <span class="hljs-attr">tempLeft</span>: <span class="hljs-number">0</span>\n      }\n    },\n    <span class="hljs-attr">computed</span>: {\n      wTov () {\n        <span class="hljs-keyword">let</span> step = <span class="hljs-keyword">this</span>.step;\n        <span class="hljs-keyword">let</span> width = <span class="hljs-keyword">this</span>.width;\n        <span class="hljs-keyword">let</span> rangeEnd = <span class="hljs-keyword">this</span>.rangeEnd;\n        <span class="hljs-keyword">if</span> (width) {\n          <span class="hljs-keyword">if</span> (step) {\n            <span class="hljs-keyword">return</span> width / (rangeEnd / step)\n          }\n          <span class="hljs-keyword">return</span> width / rangeEnd\n        }\n        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>\n      },\n      postValue () {\n        <span class="hljs-keyword">let</span> value = <span class="hljs-literal">null</span>;\n        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.step) {\n          value =  <span class="hljs-keyword">this</span>.step * <span class="hljs-keyword">this</span>.curStep;\n        } <span class="hljs-keyword">else</span> {\n          value = <span class="hljs-keyword">this</span>.left / <span class="hljs-keyword">this</span>.wTov;\n        }\n        <span class="hljs-keyword">return</span> value;\n      }\n    },\n    <span class="hljs-attr">watch</span>: {\n       <span class="hljs-attr">value</span>: {\n         handler (value) {\n           <span class="hljs-keyword">this</span>.$nextTick(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {\n             <span class="hljs-keyword">let</span> step = <span class="hljs-keyword">this</span>.step;\n             <span class="hljs-keyword">let</span> wTov = <span class="hljs-keyword">this</span>.wTov;\n             <span class="hljs-keyword">if</span> (step) {\n               <span class="hljs-keyword">this</span>.left = value / step * wTov;\n             } <span class="hljs-keyword">else</span> {\n                <span class="hljs-keyword">this</span>.left = value * wTov;\n             }\n           })\n         },\n         <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>\n       }\n    },\n    <span class="hljs-attr">methods</span>: {\n      moveStart (e) {\n        e.preventDefault();\n        <span class="hljs-keyword">const</span> body = <span class="hljs-built_in">window</span>.document.body;\n        <span class="hljs-keyword">const</span> _this = <span class="hljs-keyword">this</span>;\n        <span class="hljs-keyword">this</span>.startX = e.pageX;\n        <span class="hljs-keyword">this</span>.tempLeft = <span class="hljs-keyword">this</span>.left;\n        on({\n          <span class="hljs-attr">el</span>: body,\n          <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;mousemove&apos;</span>,\n          <span class="hljs-attr">fn</span>: <span class="hljs-keyword">this</span>.moving\n        });\n        once({\n          <span class="hljs-attr">el</span>: body,\n          <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;mouseup&apos;</span>,\n          <span class="hljs-attr">fn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{\n            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;end&apos;</span>);\n            _this.$emit(<span class="hljs-string">&apos;input&apos;</span>, _this.postValue);\n            off({\n              <span class="hljs-attr">el</span>: body,\n              <span class="hljs-attr">type</span>: <span class="hljs-string">&apos;mousemove&apos;</span>,\n              <span class="hljs-attr">fn</span>: _this.moving\n            })\n          }\n        })\n      },\n      moving(e) {\n        <span class="hljs-keyword">let</span> curX = e.pageX;\n        <span class="hljs-keyword">let</span> step = <span class="hljs-keyword">this</span>.step;\n        <span class="hljs-keyword">let</span> rangeEnd = <span class="hljs-keyword">this</span>.rangeEnd;\n        <span class="hljs-keyword">let</span> width = <span class="hljs-keyword">this</span>.width;\n        <span class="hljs-keyword">let</span> tempLeft = <span class="hljs-keyword">this</span>.tempLeft;\n        <span class="hljs-keyword">let</span> startX = <span class="hljs-keyword">this</span>.startX;\n        <span class="hljs-keyword">let</span> wTov = <span class="hljs-keyword">this</span>.wTov;\n        <span class="hljs-keyword">if</span> (step !== <span class="hljs-number">0</span>) {\n          <span class="hljs-keyword">let</span> all = <span class="hljs-built_in">parseInt</span>(rangeEnd / step);\n          <span class="hljs-keyword">let</span> curStep = (tempLeft + curX - startX) / wTov;\n          curStep &gt; all &amp;&amp; (curStep = all);\n          curStep &lt; <span class="hljs-number">0</span> &amp;&amp; (curStep = <span class="hljs-number">0</span>);\n          curStep = <span class="hljs-built_in">Math</span>.round(curStep);\n          <span class="hljs-keyword">this</span>.curStep = curStep;\n          <span class="hljs-keyword">this</span>.left = curStep * wTov;\n        } <span class="hljs-keyword">else</span> {\n          <span class="hljs-keyword">let</span> left = tempLeft + curX - startX;\n          left &lt; <span class="hljs-number">0</span> &amp;&amp; (left = <span class="hljs-number">0</span>);\n          left &gt; width &amp;&amp; (left = width);\n          <span class="hljs-keyword">this</span>.left = left;\n        }\n      },\n      createNode () {\n        <span class="hljs-keyword">const</span> fElem = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&apos;i&apos;</span>);\n        <span class="hljs-keyword">const</span> textNode = <span class="hljs-built_in">document</span>.createTextNode(<span class="hljs-keyword">this</span>.postValue.toFixed(<span class="hljs-number">2</span>));\n        fElem.appendChild(textNode);\n       <span class="hljs-keyword">return</span> fElem;\n      }\n    },\n    mounted () {\n      <span class="hljs-keyword">this</span>.width = elemOffset(<span class="hljs-keyword">this</span>.$el).width;\n    }\n  };\n</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n\n<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="undefined">\n    .jc-slider-cmp {\n        position: relative;\n        display: inline-block;\n        width: 100%;\n        border-radius: 4px;\n        height: 8px;\n        background: #ccc;\n        .jc-slider-dot {\n            position: absolute;\n            display: inline-block;\n            width: 15px;\n            height: 15px;\n            border-radius: 50%;\n            left: 0;\n            top: 50%;\n            transform: translate(-50%, -50%);\n            background: #333;\n            cursor: pointer;\n        }\n        .slider-active-bg {\n            position: relative;\n            height: 100%;\n            border-radius: 4px;\n            background: red;\n        }\n    }\n</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>\n</code></pre><p><strong>../utils/dom</strong></p><div class="widget-codetool" style="display:none"><div class="widget-codetool--inner"><span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x5168;&#x9009;"></span> <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top" data-clipboard-text="const global = window;\nexport const on = ({el, type, fn}) =&gt; {\n         if (typeof global) {\n             if (global.addEventListener) {\n                 el.addEventListener(type, fn, false)\n            } else {\n                 el.attachEvent(`on${type}`, fn)\n            }\n         }\n    };\n    export const off = ({el, type, fn}) =&gt; {\n        if (typeof global) {\n            if (global.removeEventListener) {\n                el.removeEventListener(type, fn)\n            } else {\n                el.detachEvent(`on${type}`, fn)\n            }\n        }\n    };\n    export const once = ({el, type, fn}) =&gt; {\n        const hyFn = (event) =&gt; {\n            try {\n                fn(event)\n            }\n             finally  {\n                off({el, type, fn: hyFn})\n            }\n        }\n        on({el, type, fn: hyFn})\n    };\n    // &#x6700;&#x540E;&#x4E00;&#x4E2A;\n    export const fbTwice = ({fn, time = 300}) =&gt; {\n        let [cTime, k] = [null, null]\n        // &#x83B7;&#x53D6;&#x5F53;&#x524D;&#x65F6;&#x95F4;\n        const getTime = () =&gt; new Date().getTime()\n        // &#x6DF7;&#x5408;&#x51FD;&#x6570;\n        const hyFn = () =&gt; {\n            const ags = argments\n            return () =&gt; {\n                clearTimeout(k)\n                k = cTime =  null\n                fn(...ags)\n            }\n        };\n        return () =&gt; {\n            if (cTime == null) {\n                k = setTimeout(hyFn(...arguments), time)\n                cTime = getTime()\n            } else {\n                if ( getTime() - cTime &lt; 0) {\n                    // &#x6E05;&#x9664;&#x4E4B;&#x524D;&#x7684;&#x51FD;&#x6570;&#x5806; ---- &#x91CD;&#x65B0;&#x8BB0;&#x5F55;\n                    clearTimeout(k)\n                    k = null\n                    cTime = getTime()\n                    k = setTimeout(hyFn(...arguments), time)\n                }\n            }}\n    };\n    export  const contains = function(parentNode, childNode) {\n        if (parentNode.contains) {\n            return parentNode !== childNode &amp;&amp; parentNode.contains(childNode)\n        } else {\n            // https://developer.mozilla.org/zh-CN/docs/Web/API/Node/compareDocumentPosition\n            return (parentNode.compareDocumentPosition(childNode) === 16)\n        }\n    };\n    export const addClass = function (el, className) {\n        if (typeof el !== &quot;object&quot;) {\n            return null\n        }\n        let  classList = el[&apos;className&apos;]\n        classList = classList === &apos;&apos; ? [] : classList.split(/\\s+/)\n        if (classList.indexOf(className) === -1) {\n            classList.push(className)\n            el.className = classList.join(&apos; &apos;)\n        }\n    };\n    export const removeClass = function (el, className) {\n        let classList = el[&apos;className&apos;]\n        classList = classList === &apos;&apos; ? [] : classList.split(/\\s+/)\n        classList = classList.filter(item =&gt; {\n            return item !== className\n        })\n        el.className =     classList.join(&apos; &apos;)\n    };\n    export const delay = ({fn, time}) =&gt; {\n        let oT = null\n        let k = null\n        return () =&gt; {\n            // &#x5F53;&#x524D;&#x65F6;&#x95F4;\n            let cT = new Date().getTime()\n            const fixFn = () =&gt; {\n                k = oT = null\n                fn()\n            }\n            if (k === null) {\n                oT = cT\n                k = setTimeout(fixFn, time)\n                return\n            }\n            if (cT - oT &lt; time) {\n                oT = cT\n                clearTimeout(k)\n                k = setTimeout(fixFn, time)\n            }\n        \n        }\n    };\n    export const position = (son, parent = global.document.body) =&gt; {\n        let top  = 0;\n        let left = 0;\n        let offsetParent = son;\n        while (offsetParent !== parent) {\n            let dx = offsetParent.offsetLeft;\n            let dy = offsetParent.offsetTop;\n            let old = offsetParent;\n            if (dx === null) {\n                return {\n                    flag: false\n                }\n            }\n            left += dx;\n            top += dy;\n      offsetParent = offsetParent.offsetParent;\n            if (offsetParent === null &amp;&amp; old !== global.document.body) {\n                return {\n                    flag: false\n                }\n            }\n        }\n        return  {\n            flag: true,\n            top,\n            left\n        }\n    };\n    export  const getElem = (filter) =&gt; {\n        return Array.from(global.document.querySelectorAll(filter));\n    };\n    export const elemOffset = (elem) =&gt; {\n        return {\n            width: elem.offsetWidth,\n            height: elem.offsetHeight\n        }\n    };\n" title="" data-original-title="&#x590D;&#x5236;"></span> <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="" data-original-title="&#x653E;&#x8FDB;&#x7B14;&#x8BB0;"></span></div></div><pre class="hljs typescript"><code><span class="hljs-keyword">const</span> global = <span class="hljs-built_in">window</span>;\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> on = <span class="hljs-function">(<span class="hljs-params">{el, <span class="hljs-keyword">type</span>, fn}</span>) =&gt;</span> {\n         <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> global) {\n             <span class="hljs-keyword">if</span> (global.addEventListener) {\n                 el.addEventListener(<span class="hljs-keyword">type</span>, fn, <span class="hljs-literal">false</span>)\n            } <span class="hljs-keyword">else</span> {\n                 el.attachEvent(<span class="hljs-string">`on<span class="hljs-subst">${type}</span>`</span>, fn)\n            }\n         }\n    };\n    <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> off = <span class="hljs-function">(<span class="hljs-params">{el, <span class="hljs-keyword">type</span>, fn}</span>) =&gt;</span> {\n        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> global) {\n            <span class="hljs-keyword">if</span> (global.removeEventListener) {\n                el.removeEventListener(<span class="hljs-keyword">type</span>, fn)\n            } <span class="hljs-keyword">else</span> {\n                el.detachEvent(<span class="hljs-string">`on<span class="hljs-subst">${type}</span>`</span>, fn)\n            }\n        }\n    };\n    <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> once = <span class="hljs-function">(<span class="hljs-params">{el, <span class="hljs-keyword">type</span>, fn}</span>) =&gt;</span> {\n        <span class="hljs-keyword">const</span> hyFn = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {\n            <span class="hljs-keyword">try</span> {\n                fn(event)\n            }\n             <span class="hljs-keyword">finally</span>  {\n                off({el, <span class="hljs-keyword">type</span>, fn: hyFn})\n            }\n        }\n        on({el, <span class="hljs-keyword">type</span>, fn: hyFn})\n    };\n    <span class="hljs-comment">// &#x6700;&#x540E;&#x4E00;&#x4E2A;</span>\n    <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> fbTwice = <span class="hljs-function">(<span class="hljs-params">{fn, time = 300}</span>) =&gt;</span> {\n        <span class="hljs-keyword">let</span> [cTime, k] = [<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>]\n        <span class="hljs-comment">// &#x83B7;&#x53D6;&#x5F53;&#x524D;&#x65F6;&#x95F4;</span>\n        <span class="hljs-keyword">const</span> getTime = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime()\n        <span class="hljs-comment">// &#x6DF7;&#x5408;&#x51FD;&#x6570;</span>\n        <span class="hljs-keyword">const</span> hyFn = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {\n            <span class="hljs-keyword">const</span> ags = argments\n            <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {\n                clearTimeout(k)\n                k = cTime =  <span class="hljs-literal">null</span>\n                fn(...ags)\n            }\n        };\n        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {\n            <span class="hljs-keyword">if</span> (cTime == <span class="hljs-literal">null</span>) {\n                k = setTimeout(hyFn(...arguments), time)\n                cTime = getTime()\n            } <span class="hljs-keyword">else</span> {\n                <span class="hljs-keyword">if</span> ( getTime() - cTime &lt; <span class="hljs-number">0</span>) {\n                    <span class="hljs-comment">// &#x6E05;&#x9664;&#x4E4B;&#x524D;&#x7684;&#x51FD;&#x6570;&#x5806; ---- &#x91CD;&#x65B0;&#x8BB0;&#x5F55;</span>\n                    clearTimeout(k)\n                    k = <span class="hljs-literal">null</span>\n                    cTime = getTime()\n                    k = setTimeout(hyFn(...arguments), time)\n                }\n            }}\n    };\n    <span class="hljs-keyword">export</span>  <span class="hljs-keyword">const</span> contains = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">parentNode, childNode</span>) </span>{\n        <span class="hljs-keyword">if</span> (parentNode.contains) {\n            <span class="hljs-keyword">return</span> parentNode !== childNode &amp;&amp; parentNode.contains(childNode)\n        } <span class="hljs-keyword">else</span> {\n            <span class="hljs-comment">// https://developer.mozilla.org/zh-CN/docs/Web/API/Node/compareDocumentPosition</span>\n            <span class="hljs-keyword">return</span> (parentNode.compareDocumentPosition(childNode) === <span class="hljs-number">16</span>)\n        }\n    };\n    <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> addClass = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">el, className</span>) </span>{\n        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> el !== <span class="hljs-string">&quot;object&quot;</span>) {\n            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>\n        }\n        <span class="hljs-keyword">let</span>  classList = el[<span class="hljs-string">&apos;className&apos;</span>]\n        classList = classList === <span class="hljs-string">&apos;&apos;</span> ? [] : classList.split(<span class="hljs-regexp">/\\s+/</span>)\n        <span class="hljs-keyword">if</span> (classList.indexOf(className) === <span class="hljs-number">-1</span>) {\n            classList.push(className)\n            el.className = classList.join(<span class="hljs-string">&apos; &apos;</span>)\n        }\n    };\n    <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> removeClass = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">el, className</span>) </span>{\n        <span class="hljs-keyword">let</span> classList = el[<span class="hljs-string">&apos;className&apos;</span>]\n        classList = classList === <span class="hljs-string">&apos;&apos;</span> ? [] : classList.split(<span class="hljs-regexp">/\\s+/</span>)\n        classList = classList.filter(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {\n            <span class="hljs-keyword">return</span> item !== className\n        })\n        el.className =     classList.join(<span class="hljs-string">&apos; &apos;</span>)\n    };\n    <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> delay = <span class="hljs-function">(<span class="hljs-params">{fn, time}</span>) =&gt;</span> {\n        <span class="hljs-keyword">let</span> oT = <span class="hljs-literal">null</span>\n        <span class="hljs-keyword">let</span> k = <span class="hljs-literal">null</span>\n        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {\n            <span class="hljs-comment">// &#x5F53;&#x524D;&#x65F6;&#x95F4;</span>\n            <span class="hljs-keyword">let</span> cT = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime()\n            <span class="hljs-keyword">const</span> fixFn = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {\n                k = oT = <span class="hljs-literal">null</span>\n                fn()\n            }\n            <span class="hljs-keyword">if</span> (k === <span class="hljs-literal">null</span>) {\n                oT = cT\n                k = setTimeout(fixFn, time)\n                <span class="hljs-keyword">return</span>\n            }\n            <span class="hljs-keyword">if</span> (cT - oT &lt; time) {\n                oT = cT\n                clearTimeout(k)\n                k = setTimeout(fixFn, time)\n            }\n        \n        }\n    };\n    <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> position = <span class="hljs-function">(<span class="hljs-params">son, parent = global.<span class="hljs-built_in">document</span>.body</span>) =&gt;</span> {\n        <span class="hljs-keyword">let</span> top  = <span class="hljs-number">0</span>;\n        <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>;\n        <span class="hljs-keyword">let</span> offsetParent = son;\n        <span class="hljs-keyword">while</span> (offsetParent !== parent) {\n            <span class="hljs-keyword">let</span> dx = offsetParent.offsetLeft;\n            <span class="hljs-keyword">let</span> dy = offsetParent.offsetTop;\n            <span class="hljs-keyword">let</span> old = offsetParent;\n            <span class="hljs-keyword">if</span> (dx === <span class="hljs-literal">null</span>) {\n                <span class="hljs-keyword">return</span> {\n                    flag: <span class="hljs-literal">false</span>\n                }\n            }\n            left += dx;\n            top += dy;\n      offsetParent = offsetParent.offsetParent;\n            <span class="hljs-keyword">if</span> (offsetParent === <span class="hljs-literal">null</span> &amp;&amp; old !== global.document.body) {\n                <span class="hljs-keyword">return</span> {\n                    flag: <span class="hljs-literal">false</span>\n                }\n            }\n        }\n        <span class="hljs-keyword">return</span>  {\n            flag: <span class="hljs-literal">true</span>,\n            top,\n            left\n        }\n    };\n    <span class="hljs-keyword">export</span>  <span class="hljs-keyword">const</span> getElem = <span class="hljs-function">(<span class="hljs-params">filter</span>) =&gt;</span> {\n        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Array</span>.from(global.document.querySelectorAll(filter));\n    };\n    <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> elemOffset = <span class="hljs-function">(<span class="hljs-params">elem</span>) =&gt;</span> {\n        <span class="hljs-keyword">return</span> {\n            width: elem.offsetWidth,\n            height: elem.offsetHeight\n        }\n    };\n</code></pre>\n';s=(s=(s=(s=s.replace(/"{/g,"{")).replace(/{"/g,"{")).replace(/"}/g,"}")).replace(/}"/g,"}"),$("#row").html(s)})</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>vue 指令&mdash;气泡提示(手撸实战)</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000016719995">https://segmentfault.com/a/1190000016719995</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/82bb16b/" target="_blank">https://alili.tech/archive/82bb16b/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({el:".blog-post-comments",app_id:"ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz",app_key:"hLhtmd4tT0qJbyO2SgQ8odya",placeholder:"说点什么?",avatar:"retro",notify:!0,verify:!0})</script><ul id="more-post-list" class="archive readmore"><h3>推荐阅读</h3><li><a href="/archive/vi32h2qgdt/">JavaScript点击事件——美女合集<aside class="dates">2018-11-16</aside></a></li><li><a href="/archive/h1hfkoy4as/">Web UI 自动化测试技术选型<aside class="dates">2018-11-16</aside></a></li><li><a href="/archive/2ehenm5fx2r/">【基础】固定列宽的表格及示例演示<aside class="dates">2018-11-16</aside></a></li><li><a href="/archive/bp751dpaao6/">移动端开发单位——rem，动态使用<aside class="dates">2018-11-16</aside></a></li><li><a href="/archive/w0ea6x92n7j/">预告：Javascript全栈开发的系列文章<aside class="dates">2018-11-16</aside></a></li><li><a href="/archive/nh5d5ddjtjs/">CORS 跨域携带 Cookie 发送请求<aside class="dates">2018-11-16</aside></a></li><li><a href="/archive/32ufjbf3p3i/">ES6深入浅出 Generator<aside class="dates">2018-11-16</aside></a></li><li><a href="/archive/tgareq08se/">H5移动端开发<aside class="dates">2018-11-16</aside></a></li><li><a href="/archive/kuarhdceuz/">JS面试理论题<aside class="dates">2018-11-16</aside></a></li><li><a href="/archive/82gahy2bcol/">JavaScript ES6功能概述（ECMAScript 6和ES2015 &#43;）<aside class="dates">2018-11-16</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2018 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/js/main.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script>!function(){var d="http:"==document.location.protocol?"http://js.passport.qihucdn.com/11.0.1.js?05520debdbedd780ba345d83b7d5e6f4":"https://jspassport.ssl.qhimg.com/11.0.1.js?05520debdbedd780ba345d83b7d5e6f4";document.write('<script src="'+d+'" id="sozz"><\/script>')}()</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></body></html>